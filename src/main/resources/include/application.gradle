// we want to allow to import the project into IDE in local environment. We don't need additional docker info for that
def dockerOrganisation = "mental-mate"
def dockerLogin = ""
def dockerPassword = ""
if (project.ext.ci) {
    dockerOrganisation = project.ext.getMandatoryProperty("dockerOrganisation")
    dockerLogin = project.ext.getMandatoryProperty("dockerLogin")
    dockerPassword = project.ext.getMandatoryProperty("dockerPassword")
}

bootBuildImage {
    imageName = "${dockerOrganisation}/${project.name}:${project.version}"
    if (project.ext.ci) {
        publish = true
        project.logger.lifecycle("configured docker image publishing")
    }
    docker {
        publishRegistry {
            url = "https://index.docker.io/v1/"
            username = dockerLogin
            password = dockerPassword
        }
    }
}